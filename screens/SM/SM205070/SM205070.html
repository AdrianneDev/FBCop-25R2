<template>
	<iframe name="Profiler" style="display: none;"></iframe>
	<qp-template id="filter_form" name="1-1-1" class="equal-height" qp-collapsible wg-container>
		<qp-fieldset slot="A" id="requestsSettings" view.bind="Filter" caption="Request Logging">
			<field name="ProfilerEnabled"></field>
			<field name="TimeLimit"></field>
			<field name="SqlCounterLimit"></field>
			<field name="ScreenId"></field>
			<field name="UserId"></field>
		</qp-fieldset>
		<qp-fieldset slot="B" id="sqlSettings" view.bind="Filter" caption="SQL Logging">
			<field name="SqlProfiler"></field>
			<field name="SqlTimeLimit"></field>
			<field name="SqlRowCounterLimit"></field>
			<field name="SqlMethodFilter"></field>
			<field name="SqlProfilerIncludeQueryCache"></field>
		</qp-fieldset>
		<qp-fieldset slot="C" id="eventsSettings" view.bind="Filter" caption="Event Logging">
			<field name="TraceEnabled"></field>
			<field name="LogLevelFilter"></field>
			<field name="LogCategoryFilter"></field>
			<field name="TraceExceptionsEnabled"></field>
		</qp-fieldset>
	</qp-template>

	<qp-tabbar id="maintTab">
		<qp-tab id="tabRequests" caption="REQUESTS">
			<qp-grid id="requests_grid" view.bind="Samples" wg-container="Samples_grid">
			</qp-grid>
		</qp-tab>
		<qp-tab id="tabSql" caption="SQL">
			<qp-grid id="sql_grid" view.bind="SqlSummary" wg-container="SqlSummary_GridSqlSummary">
			</qp-grid>
		</qp-tab>
		<qp-tab id="tabExceptions" caption="EXCEPTIONS">
			<qp-grid id="exceptions_grid" view.bind="TraceExceptionsSummary" wg-container="TraceExceptionsSummary_GridExceptionsLog">
			</qp-grid>
		</qp-tab>
		<qp-tab id="tabEventLog" caption="EVENT LOG">
			<qp-grid id="events_grid" view.bind="TraceEventsLog" wg-container="TraceEventsLog_GridTraceLog">
			</qp-grid>
		</qp-tab>
	</qp-tabbar>

	<qp-panel id="Sql" caption="View SQL" auto-repaint="true" width="lg" height="85vh">
		<qp-splitter id="sp_sql" split="height" initial-split="50%" state="normal">
			<split-pane>
				<qp-grid id="sqlProfiler_grid" view.bind="Sql" wg-container="Sql_GridProfiler"></qp-grid>
			</split-pane>
			<split-pane>
				<div id="sql_div" class="stretch" wg-container>
					<qp-text-editor id="sql_trace" wg-name="SqlTrace" slot="A" config.bind="{readOnly: true, type: 1}" class="stretch" fixed-height fixed-width state.bind="SqlSummaryRowsPreview.SQLWithStackTrace"></qp-text-editor>
				</div>
			</split-pane>
		</qp-splitter>
	</qp-panel>
	<qp-panel id="TraceEvents" caption="View Event Log" auto-repaint="true" width="lg" height="85vh">
		<qp-splitter id="sp_events" split="height" initial-split="50%" state="normal">
			<split-pane>
				<qp-grid id="eventsProfiler_grid" view.bind="TraceEvents" wg-container="TraceEvents_TraceEventsGrid"></qp-grid>
			</split-pane>
			<split-pane>
				<div id="event_div" class="stretch" wg-container>
					<qp-text-editor id="event_trace" wg-name="EventTrace" slot="A" config.bind="{readOnly: true, type: 1}" class="stretch" fixed-height fixed-width state.bind="TraceEventWithMessage.MessageWithStackTrace"></qp-text-editor>
				</div>
			</split-pane>
		</qp-splitter>
	</qp-panel>
	<qp-panel id="TraceExceptions" caption="Exception Profiler" auto-repaint="true" width="lg">
		<qp-splitter id="sp_exceptions" split="height" initial-split="50%" state="normal">
			<split-pane>
				<qp-grid id="exceptionsProfiler_grid" view.bind="TraceExceptions" wg-container="TraceExceptions_ExceptionsGrid"></qp-grid>
			</split-pane>
			<split-pane>
				<div id="exception_div" class="stretch" wg-container>
					<qp-text-editor id="exception_trace" wg-name="ProfilerExceptionTrace" slot="A" config.bind="{readOnly: true, type: 1}" class="stretch" fixed-height fixed-width state.bind="TraceEventWithMessage.MessageWithStackTrace"></qp-text-editor>
				</div>
			</split-pane>
		</qp-splitter>
	</qp-panel>
	<qp-panel id="TraceExceptionDetails" caption="View Exception Details" auto-repaint="true" width="lg" height="85vh">
		<qp-splitter id="sp_exception_details" split="height" initial-split="50%" state="normal">
			<split-pane>
				<qp-grid id="exceptionsDetails_grid" view.bind="TraceExceptionDetails" wg-container="TraceExceptionDetails_PXGrid1"></qp-grid>
			</split-pane>
			<split-pane>
				<div id="exception_detail_div" class="stretch" wg-container>
					<qp-text-editor id="exception_detail_trace" wg-name="DetailsExceptionTrace" slot="A" config.bind="{readOnly: true, type: 1}" class="stretch" fixed-height fixed-width state.bind="TraceEventWithMessage.MessageWithStackTrace"></qp-text-editor>
				</div>
			</split-pane>
		</qp-splitter>
	</qp-panel>
	<qp-panel id="SqlSummary" caption="Sql Details" auto-repaint="true" width="lg">
		<qp-template id="sqlSummaryDetails_form" wg-container="SqlSummaryFilter_FormSqlSummaryRows" name="1-1">
			<qp-fieldset id="sqlSummaryDetailsSettings1" view.bind="SqlSummaryFilter" slot="A">
				<field name="RecordId"></field>
				<field name="TotalSQLTime"></field>
			</qp-fieldset>
			<qp-fieldset id="sqlSummaryDetailsSettings2" view.bind="SqlSummaryFilter" slot="B">
				<field name="TotalExecutions"></field>
				<field name="TotalRows"></field>
			</qp-fieldset>
		</qp-template>
		<qp-grid id="sqlDetails_grid" view.bind="SqlSummaryRows" wg-container="SqlSummaryRows_SqlSummaryRowsGrid">
		</qp-grid>
		<qp-fieldset id="sqlDetailsFormStackTrace" view.bind="SqlSummaryRowsPreview" wg-container="SqlSummaryRowsPreview_FormSqlSummaryRowDetails">
			<field name="SQLWithStackTrace" class="no-label" config-type.bind="1" config-rows.bind="15"></field>
		</qp-fieldset>
	</qp-panel>
	<qp-panel id="TraceEventsLog" caption="View Event Details" auto-repaint="true" width="lg" height="85vh" wg-container="TraceEventsLogDetails_PXFormView3">
		<qp-template id="eventDetails_form" name="1-1">
			<qp-fieldset id="eventDetailsSettings1" view.bind="TraceEventsLogDetails" slot="A" width="50vw">
				<field name="EventDateTime"></field>
			</qp-fieldset>
			<qp-fieldset id="eventDetailsSettings2" view.bind="TraceEventsLogDetails" slot="B" width="50vw">
				<field name="TraceType"></field>
			</qp-fieldset>
		</qp-template>
		<qp-tabbar id="events_tabbar">
			<qp-tab id="details" caption="Event Details">
				<div id="event_details_div" class="stretch">
					<qp-text-editor slot="A" wg-field config.bind="{type: 1, id: 'edTraceEventsLogDetails-EventDetails'}" class="stretch no-label" fixed-height fixed-width state.bind="TraceEventsLogDetails.EventDetails"></qp-text-editor>
				</div>
			</qp-tab>
			<qp-tab id="trace" caption="Stack Trace" if.bind='TraceEventsLogDetails.StackTrace.value != null'>
				<div id="stack_trace_div" class="stretch">
					<qp-text-editor slot="A" wg-field config.bind="{type: 1, id: 'edTraceEventsLogDetails-StackTrace'}" class="stretch no-label" fixed-height fixed-width state.bind="TraceEventsLogDetails.StackTrace"></qp-text-editor>
				</div>
			</qp-tab>
		</qp-tabbar>
	</qp-panel>

	<qp-upload-dialog
		id="dlgUploadFile"
		key="UploadDialogPanel"
		session-key="UploadedPerformanceLogsKey"
		caption="Upload Logs"
		allowed-types=".zip">
	</qp-upload-dialog>

</template>
