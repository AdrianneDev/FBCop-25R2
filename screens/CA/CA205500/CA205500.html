<template>

	<qp-template id="formBankFeed" name="1-1" class="label-size-m equal-height" wg-container="BankFeed_form">
		<qp-fieldset id="columnFirstBankFeed" view.bind="BankFeed" slot="A">
			<field name="BankFeedID"></field>
			<field name="Type"></field>
			<field name="ImportStartDate"></field>
			<field name="Descr"></field>
		</qp-fieldset>
		<qp-fieldset id="columnSecondBankFeed" view.bind="BankFeed" slot="B">
			<field name="Status"></field>
			<field name="Institution"></field>
			<field name="CreateExpenseReceipt"></field>
			<field name="CreateReceiptForPendingTran"></field>
			<field name="MultipleMapping"></field>
		</qp-fieldset>
	</qp-template>

	<qp-tabbar id="tabs">
		<qp-tab id="tabVashAccount" caption="Cash Accounts">
			<qp-grid id="gridCashAccounts" view.bind="BankFeedDetail" wg-container="BankFeedDetail_gridAccounts"></qp-grid>
		</qp-tab>

		<qp-tab id="tabCorporateCards" caption="Corporate Cards" if.bind="BankFeed.CreateExpenseReceipt.value==true">
			<qp-grid id="gridCorporateCards" view.bind="BankFeedCorpCC" wg-container="BankFeedCorpCC_gridCorpCC"></qp-grid>
		</qp-tab>

		<qp-tab id="tabExpenseItems" caption="Expense Items" if.bind="BankFeed.CreateExpenseReceipt.value==true">
			<qp-template name="1-1" id="formExpenseTerms" class="label-size-m" wg-container="CurrentBankFeed_tabs">
				<qp-fieldset id="panelExpenseTerms" class="transparent-section" view.bind="CurrentBankFeed" slot="A">
					<field name="DefaultExpenseItemID"></field>
				</qp-fieldset>
			</qp-template>
			<qp-grid id="gridExpenseTerms" view.bind="BankFeedExpense" wg-container="BankFeedExpense_gridExpense"></qp-grid>
		</qp-tab>

		<qp-tab id="tabCustomMappingRules" caption="Custom Mapping Rules">
			<qp-grid id="gridCustomMappingRules" view.bind="BankFeedFieldMapping" wg-container="BankFeedFieldMapping_gridFieldMapping"></qp-grid>
		</qp-tab>

		<qp-tab id="tabFileSettings" caption="Source File" if.bind="BankFeed.Type.value=='F'">
			<qp-template id="formFileSettings" name="1-1" wg-container="CurrentBankFeed_tabs">
				<div slot="A">
					<qp-fieldset id="groupConnectionToSourceFile" view.bind="CurrentBankFeed" caption="Connection to Source File" class="label-size-s">
						<field name="FolderPath"></field>
						<field name="FileFormat"></field>
						<field name="FolderLogin"></field>
						<field name="FolderPassword"></field>
						<field name="SshCertificateName"></field>
						<field name="actionCheckFileFolder" unbound>
							<qp-button id="buttonCheckFileFolder" caption="Test Connection" state.bind="CheckFileFolder" wg-name="TestConnection" class="col-auto"></qp-button>
						</field>
					</qp-fieldset>
					<qp-fieldset id="groupSourceFile" view.bind="CurrentBankFeed" caption="Source File" class="label-size-s">
						<field name="actionSetupProvider" unbound>
							<qp-button id="buttonSetupProvider" caption="Set Up Data Provider" state.bind="SetUpDataProvider" class="col-auto"></qp-button>
						</field>
						<field name="ProviderID"></field>
						<field name="FileAmountFormat"></field>
						<field name="DebitLabel"></field>
						<field name="CreditLabel"></field>
					</qp-fieldset>
				</div>
			</qp-template>

			<qp-grid caption="Mapping Rules" id="gridFileFieldMapping" view.bind="BankFeedFileFieldMapping"></qp-grid>
		</qp-tab>
	</qp-tabbar>

	<qp-panel caption="Categories" id="BankFeedCategories" auto-repaint="true" height="85vh">
		<qp-grid id="gridCategories" view.bind="BankFeedCategories"></qp-grid>
	</qp-panel>

	<qp-panel caption="Load File Manually" id="LoadFileTransactions" auto-repaint="true">
		<qp-template name="1" wg-container="LoadFileTransactions_frmLoadFileManually" id="formLoadFileManually">
			<qp-fieldset view.bind="LoadFileTransactions" slot="A" class="label-size-m" id="panelLoadFileManually">
				<field name="FileName"></field>
				<field name="IgnoreDates"></field>
			</qp-fieldset>
		</qp-template>

		<footer>
			<qp-button id="buttonLoad-LoadFileTransactions" caption="Load" dialog-result="OK"></qp-button>
			<qp-button id="buttonCancelLoad-LoadFileTransactions" caption="Close" dialog-result="Cancel" ></qp-button>
		</footer>
	</qp-panel>

	<qp-panel id="ShowFileTransactions" caption="Load Transactions in Test Mode" auto-repaint="true" width="lg" height="85vh">

		<qp-template id="formFilter-ShowFileTransactions" name="17-17-14" wg-container="ShowFileTransactions_frmLoadFiletransactions">
			<qp-fieldset id="panelFilter-ShowFileTransactions" view.bind="ShowFileTransactions" slot="A">
				<field name="FileName"></field>
			</qp-fieldset>
		</qp-template>

		<qp-grid id="gridFileTransactions" view.bind="BankFeedFileTransactions" wg-container="BankFeedFileTransactions_gridFileTrans"></qp-grid>

		<footer>
			<qp-button id="buttonLoadFileTrans-ShowFileTransactions" state.bind="LoadTransactions"></qp-button>
			<qp-button id="buttonCancel-ShowFileTransactions" dialog-result="Cancel" caption="Close"></qp-button>
		</footer>

	</qp-panel>

	<qp-panel id="Filter" caption="Load Transactions in Test Mode" auto-repaint="true" width="lg" height="85vh">

		<qp-template id="formFilter-Filtrer" name="17-17-14" wg-container="Filter_frmLoadTransactions">
			<qp-fieldset id="panelFilter-Filter" view.bind="Filter" slot="A" class="label-size-m">
				<field name="Date" caption="Date Range">
					<qp-field control-state.bind="Filter.DateTo"></qp-field>
				</field>
				<field name="MaxTransactions"></field>
				<field name="LineNbr"></field>
			</qp-fieldset>
		</qp-template>

		<qp-grid id="gridTransactions-Filter" view.bind="BankFeedTransactions" wg-container="BankFeedTransactions_gridTrans"></qp-grid>

		<footer>
			<qp-button id="buttonLoadTransactions-Filter" state.bind="LoadTransactions"></qp-button>
			<qp-button id="buttonClose-Filter" dialog-result="Cancel" caption="Close"></qp-button>
		</footer>

	</qp-panel>

	<qp-panel id="CurrentBankFeed" caption="Access ID" auto-repaint="true">

		<qp-template id="formAccessID" name="1">
			<div slot="A">
				<qp-info-box id="labelWarningAccessToken" type="warning"
					caption="Warning: These identifiers are used to authenticate your company in your financial institution, they are stored securely inside Acumatica ERP. You may be asked to provide this info to Acumatica or Plaid/MX support. If so, please take security precautions to send this information. DO NOT save this ID outside of Acumatica ERP, copy and paste it into an email, or provide it to anyone except Acumatica's or partner's support.">
				</qp-info-box>
				<qp-fieldset id="CurrentBankFeed_layoutRule8" wg-container="CurrentBankFeed_frmShowIDs" view.bind="CurrentBankFeed">
					<field name="ExternalUserID"></field>
					<field name="ExternalItemID"></field>
				</qp-fieldset>
			</div>
		</qp-template>

	</qp-panel>
</template>
