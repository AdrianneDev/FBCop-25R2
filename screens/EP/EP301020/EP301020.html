<template>
	<require from="./style.scss"></require>
	<qp-template id="ClaimDetails_form" name="7-10-7" class="equal-height" wg-container>
		<qp-fieldset id="formSlotA" slot="A" view.bind="ClaimDetails">
			<field name="ClaimDetailCD" ></field>
			<field name="Status" class="colored" pinned></field>
			<field name="ExpenseDate" ></field>
		</qp-fieldset>
		<qp-fieldset slot="B" id="formSlotB" view.bind="ClaimDetails" >
			<field name="InventoryID" config-allow-edit.bind="true"></field>
			<field name="EmployeeID" ></field>
			<field name="BranchID" ></field>
		</qp-fieldset>
		<qp-fieldset id="formSlotC" slot="C" view.bind="ClaimDetails" class="highlights-section">
			<field name="ClaimAmountGroup" unbound>
				<qp-label slot="label" caption="Claim Amount"></qp-label>
				<qp-label class="col-4"></qp-label>
				<qp-field control-state.bind="ClaimDetails.CuryTranAmtWithTaxes" class="col-8 no-label"></qp-field>
			</field>
			<field name="TaxTotalGroup" unbound>
				<qp-label slot="label" caption="Tax Total"></qp-label>
				<qp-label class="col-4"></qp-label>
				<qp-field control-state.bind="ClaimDetails.CuryTaxTotal" class="col-8 no-label"></qp-field>
			</field>
			<field name="AmountCardCurrencyGroup" unbound>
				<qp-label slot="label" caption="Amount in Card Currency" if.bind="ClaimDetails.CardCuryID.value && ClaimDetails.CardCuryID.visible"></qp-label>
				<qp-field control-state.bind="ClaimDetails.CardCuryID" class="col-4 no-label"></qp-field>
				<qp-field control-state.bind="ClaimDetails.ClaimCuryTranAmtWithTaxes" class="col-8 no-label"></qp-field>
			</field>
		</qp-fieldset>
	</qp-template>
	<qp-tabbar id="CurrentClaimDetails_Tabs" wg-container>
		<qp-tab id="DetailsTab" caption="Details">
			<qp-template name="1-1" id="DetailsForm">
				<div slot="A">
					<qp-fieldset id="CurrentClaimDetailsFormSlotA01" view.bind="CurrentClaimDetails" caption="Expense Details">
						<field name="TranDesc" config-rows.bind="3"></field>
						<field name="Qty"></field>
						<field name="UOM"></field>
						<field name="CuryUnitCost"></field>
						<field name="CuryExtCost"></field>
						<field name="CuryEmployeePart"></field>
						<field name="CuryTipAmt" ></field>
						<field name="CuryID" control-type="qp-currency" view.bind="_EPExpenseClaimDetails_CurrencyInfo_" config-display-mode.bind="'both'"></field>
						<field name="ExpenseRefNbr" ></field>
						<field name="PaidWith" ></field>
						<field name="CorpCardID" ></field>
					</qp-fieldset>
					<qp-fieldset id="CurrentClaimDetailsFormSlotA03" view.bind="CurrentClaimDetails" caption="Expense Classification">
						<field name="Hold" ></field>
						<field name="Released" ></field>
						<field name="HoldClaim" ></field>
					</qp-fieldset>
					<qp-fieldset id="CurrentClaimDetailsFormSlotA05" view.bind="CurrentClaimDetails" caption="Related Document">
						<field name="RefNbr" config-allow-edit.bind="true"></field>
						<field name="StatusClaim" ></field>
						<field name="ContractID" ></field>
						<field name="TaskID" ></field>
						<field name="CostCodeID" ></field>
						<field name="FSEntityTypeUI" ></field>
						<field name="FSEntityNoteID" config-allow-edit.bind="true"></field>
						<field name="FSBillable" ></field>
						<field name="ClaimDetails.CustomerID"></field>
						<field name="ClaimDetails.CustomerLocationID"></field>
						<field name="Billable" ></field>
					</qp-fieldset>
				</div>
				<div slot="B">
					<div class="framed-section">
						<qp-caption caption="Image"></qp-caption>
						<qp-image-uploader
							id="imageUploader"
							wg-name="ImgUploader"
							width="100% 6/5"
							config.bind="{showFeed: true}">
						</qp-image-uploader>
					</div>
					<qp-fieldset id="CurrentClaimDetailsFormSlotB01" view.bind="CurrentClaimDetails" caption="GL Accounts">
						<field name="ExpenseAccountID" ></field>
						<field name="ExpenseSubID" ></field>
						<field name="SalesAccountID" ></field>
						<field name="SalesSubID" ></field>
					</qp-fieldset>
				</div>
			</qp-template>
		</qp-tab>
		<qp-tab id="TaxesTab" caption="Taxes">
			<qp-template name="17-7" id="TaxesForm" class="stretch">
				<qp-grid slot="A" id="grid1" view.bind="Taxes" class="framed-section">
				</qp-grid>
				<div slot="B">
					<qp-fieldset id="CurrentClaimDetailsFormSlotA04" view.bind="CurrentClaimDetails" caption="Tax Info">
						<field name="TaxZoneID" ></field>
						<field name="TaxCalcMode" ></field>
						<field name="TaxCategoryID" ></field>
					</qp-fieldset>
					<qp-fieldset id="CurrentClaimDetailsForm06"
							 wg-container="CurrentClaimDetails_TaxRoundDiffForm"
							 view.bind="CurrentClaimDetails"
							 caption="Tax Totals"
							 class="highlights-section">
						<field name="CuryTaxRoundDiff" ></field>
						<field name="CuryTaxTotal"></field>
					</qp-fieldset>
				</div>
			</qp-template>
		</qp-tab>
		<qp-tab id="BankingTab" caption="Banking" if.bind="ClaimDetails.BankTranStatus.value != null">
			<qp-fieldset id="CurrentClaimDetailsForm07" view.bind="CurrentClaimDetails">
				<field name="BankTranStatus" ></field>
				<field name="Category" ></field>
			</qp-fieldset>
		</qp-tab>
		<qp-tab if.bind="ApprovalSetupView.ApprovalEnabled.value === true" id="tabApprovals" caption="Approvals">
		</qp-tab>
	</qp-tabbar>
	<qp-panel id="TaxZoneUpdateAskView" auto-repaint="true" width="sm" wg-container="TaxZoneUpdateAskView_PXFormView1">
		<qp-label caption="Do you want to use the specified tax zone for expense receipts by default?"></qp-label>
		<footer>
			<qp-button id="SaveTaxZone" state.bind="SaveTaxZone" caption="Yes" dialog-result="OK">
			</qp-button>
			<qp-button id="CancelTaxZone" caption="No" dialog-result="Cancel">
			</qp-button>
		</footer>
	</qp-panel>
</template>
