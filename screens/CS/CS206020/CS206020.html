<template>
	<require from="../common/arm/arm.scss"></require>
	<div class="arm-styles">
		<qp-grid id="gridHeaderStyles" view.bind="AllHeaderStyles" class="hidden"
			on-data-ready.call="headerStylesDataReadyHandler(grid, args)">
		</qp-grid>
		<qp-grid id="gridColumnStyles" view.bind="AllColumnStyles" class="hidden"
			on-data-ready.call="columnStylesDataReadyHandler(grid, args)">
		</qp-grid>
		<qp-grid id="gridColumns" view.bind="AllColumns" view-model.ref="columnsGrid" class="hidden"></qp-grid>
	</div>

	<qp-splitter id="splitterMain" initial-split="60%" split="width" ref="splitterElement">
		<split-pane>
			<div class="arm-pane no-animation">
				<qp-fieldset id="groupColumnSet" view.bind="ColumnSetOrdered" class="hidden">
					<field name="ColumnSetCode"></field>
					<field name="Description"></field>
				</qp-fieldset>
				<!-- workaround for "retrieveMode: 1" issue -->
				<qp-fieldset id="groupCurrentDataSource" view.bind="CurrentDataSource" class="hidden">
					<field name="Expand"></field>
					<field name="RowDescription"></field>
				</qp-fieldset>
				<!-- workaround for "retrieveMode: 1" issue -->
				<qp-fieldset id="groupCurrentHeader" view.bind="CurrentHeader" class="hidden">
					<field name="ColumnCode"></field>
					<field name="IsRowSet"></field>
				</qp-fieldset>
				<qp-grid id="grid" caption="Columns" view.bind="HeadersWithRowSet" view-model.ref="headersGrid"
					class="arm-grid arm-grid--column-set arm-grid--no-settings"
					on-active-row-changed.call="headersActiveRowChanged(args)"
					on-active-cell-changed.call="headersActiveCellChanged(args)"
					on-filter-columns.call="headersAddAttributesOnFilterColumns(col)"
					on-resize-column.call="headersResizeColumn(col)"
					on-row-drag-over.call="headersRowDragOver(row, afterLast)"
					on-get-cell-text.call="headersGetCellText(args)">
				</qp-grid>
			</div>
		</split-pane>
		<split-pane>
			<div class="arm-pane">
				<qp-tabbar id="ColumnSettings_tab" wg-container>
					<qp-tab id="tabData" caption="Data">
						<qp-fieldset id="groupValue" show.bind="CurrentHeader.isRealHeader" view.bind="CurrentHeader" caption="Header Text" class="label-size-sm">
							<field name="Formula" caption="Calculation Formula" control-type="qp-formula-editor"></field>
						</qp-fieldset>
						<qp-fieldset id="groupColumValue" show.bind="!CurrentHeader.isRealHeader" view.bind="CurrentColumn" caption="Column Value" class="label-size-sm">
							<field name="ColumnType"></field>
							<field name="Formula" caption="Calculation Formula" control-type="qp-formula-editor"></field>
							<field name="Description"></field>
							<field name="CellEvalOrder"></field>
						</qp-fieldset>

						<div show.bind="!CurrentHeader.isRealHeader">
							<qp-include url="../common/arm/arm-data-source.html" view="CurrentDataSource"></qp-include>
						</div>
						<qp-fieldset id="groupViewCondition" show.bind="CurrentHeader.isRealHeader" view.bind="CurrentHeader" caption="View Condition" class="label-size-sm">
							<field name="StartColumn" caption="Columns" class="arm-range-fields">
								<qp-field id="fieldEndColumn"
									control-state.bind="CurrentHeader.EndColumn"></qp-field>
							</field>
						</qp-fieldset>
						<qp-fieldset id="groupViewConditionColumn" show.bind="!CurrentHeader.isRealHeader" view.bind="CurrentColumn" caption="View Condition" class="label-size-sm">
							<field name="VisibleFormula"></field>
							<field name="GroupID"></field>
							<field name="UnitGroupID"></field>
							<field name="SuppressEmpty"></field>
							<field name="HideZero"></field>
							<field name="SuppressLine"></field>
						</qp-fieldset>
					</qp-tab>
					<qp-tab id="tabFormatting" caption="Formatting">
						<div class="arm-toolbar">
							<qp-tool-bar config.bind="formattingToolbarConfig"></qp-tool-bar>
						</div>
						<div show.bind="CurrentHeader.isRealHeader">
							<qp-include url="../common/arm/arm-style-font.html" view="CurrentHeaderStyle"></qp-include>
						</div>
						<div show.bind="!CurrentHeader.isRealHeader">
							<qp-include url="../common/arm/arm-style-font.html" view="CurrentColumnStyle"></qp-include>
						</div>

						<qp-fieldset id="groupColumnHeaderStyle" show.bind="CurrentHeader.isRealHeader" view.bind="CurrentColumn" caption="Layout and Style" class="label-size-sm">
							<field name="Width"></field>
							<field name="CurrentHeader.Height"></field>
							<field name="CurrentHeaderStyle.BackColorRGB" caption="Background Color" control-type="qp-color-picker"></field>
						</qp-fieldset>
						<qp-fieldset id="groupColumnStyle" show.bind="!CurrentHeader.isRealHeader" view.bind="CurrentColumn" caption="Layout and Style" class="label-size-sm">
							<field name="Format" caption="Number Format"></field>
							<field name="CellFormatOrder"></field>
							<field name="Rounding"></field>
							<field name="Width"></field>
							<field name="AutoHeight"></field>
							<field name="PrintControl"></field>
							<field name="PageBreak"></field>
							<field name="ExtraSpace"></field>
							<field name="CurrentColumnStyle.BackColorRGB" caption="Background Color" control-type="qp-color-picker"></field>
						</qp-fieldset>
					</qp-tab>
				</qp-tabbar>
			</div>
		</split-pane>
	</qp-splitter>

	<qp-panel id="NewColumnSetPanel" caption="New Column Set" auto-repaint="true" close-button-locator="#pbCancel">
		<qp-template id="newColumnSetPanelDataId" wg-container name="1">
			<qp-fieldset slot="A" id="newColumnSetPanelDataId1" view.bind="NewColumnSetPanel">
				<field name="ColumnSetCode"></field>
				<field name="Type"></field>
				<field name="Description"></field>
			</qp-fieldset>
		</qp-template>
		<footer>
			<qp-button id="pbClose" dialog-result="OK" caption="Save" config.bind="{ validateInput: true }"></qp-button>
			<qp-button id="pbCancel" dialog-result="Abort" caption="Cancel"></qp-button>
		</footer>
	</qp-panel>

	<qp-panel id="Parameter" caption="Copy Column Set" auto-repaint="true" close-button-locator="#pbCancel">
		<qp-template id="copyColumnSetPanelDataId" wg-container name="1">
			<qp-fieldset slot="A" id="copyColumnSetPanelDataId1" view.bind="Parameter">
				<field name="NewColumnSetCode"></field>
				<field name="Description"></field>
			</qp-fieldset>
		</qp-template>
		<footer>
			<qp-button id="pbClose" dialog-result="OK" caption="Save" config.bind="{ validateInput: true }"></qp-button>
			<qp-button id="pbCancel" dialog-result="Abort" caption="Cancel"></qp-button>
		</footer>
	</qp-panel>
</template>
