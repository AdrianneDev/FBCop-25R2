<template>
	<require from="./pm301000-status-colors.scss"></require>
	<qp-template id="Project_form" name="7-10-7" class="equal-height" qp-collapsible wg-container>
		<qp-fieldset id="formSlotA" slot="A" view.bind="Project">
			<field name="ContractCD" pinned config.bind="{displayMode: 'id'}"></field>
			<field name="Status" class="colored" pinned="false"></field>
			<using view="ProjectProperties" wg-container="ProjectProperties_tab">
				<field name="StartDate" pinned></field>
				<field name="ExpireDate"></field>
				<field name="QuoteNbr" config-allow-edit.bind="true"></field>
			</using>
		</qp-fieldset>
		<qp-fieldset id="formSlotB" slot="B" view.bind="Project">
			<field name="TemplateID" config-allow-edit.bind="true"></field>
			<field name="OwnerID"></field>
			<field name="AssistantID"></field>
			<field name="CustomerID" pinned config-allow-edit.bind="true"></field>
			<field name="CuryID" pinned="false"></field>
			<field name="Description" pinned config-rows.bind="3"></field>
		</qp-fieldset>
		<qp-fieldset id="formSlotC" slot="C" view.bind="TaskTotals" class="highlights-section">
			<field name="CuryIncome" pinned></field>
			<field name="CuryExpense" pinned></field>
			<field name="CuryMargin"></field>
			<field name="MarginPct" caption="Margin (%)" pinned></field>
			<field name="RevenueFilter.CuryAmountToInvoiceTotal" caption="Pending Invoice Amount"></field>
		</qp-fieldset>
	</qp-template>
	<qp-tabbar id="ProjectProperties_tab" active-tab-id="SummaryTab" wg-container>
		<qp-tab id="SummaryTab" caption="Summary" class="label-size-m">
			<qp-template id="SummaryForm" name="1-1">
				<div slot="A">
					<qp-fieldset id="SummaryTabSlotA01" view.bind="ProjectProperties" caption="Project Properties">
						<field name="BudgetLevel"></field>
						<field name="CostBudgetLevel"></field>
						<field name="ProjectGroupID" config-allow-edit.bind="true"></field>
						<field name="ApproverID"></field>
						<field name="LastChangeOrderNumber"></field>
						<field name="CuryIDCopy">
							<qp-button id="btnSetCurrencyRates" state.bind="SetCurrencyRates" class="col-auto" wg-name="SetRates"></qp-button>
						</field>
						<field name="BaseCuryID"></field>
						<field name="RateTypeID" config-allow-edit.bind="true"></field>
						<field name="AccountingMode"></field>
						<field name="AllowIssueFromFreeStock"></field>
						<field name="ChangeOrderWorkflow"></field>
						<field name="AllowNonProjectAccountGroups"></field>
						<field name="RestrictToEmployeeList"></field>
						<field name="RestrictToResourceList"></field>
						<field name="BudgetMetricsEnabled"></field>
						<field name="CertifiedJob"></field>
					</qp-fieldset>
					<qp-fieldset id="SummaryTabSlotA02" view.bind="ProjectProperties" caption="Billing and Allocation Settings">
						<field name="BillingCuryID"></field>
						<using view="Billing" wg-container="Billing_billingForm">
							<field name="Type"></field>
							<field name="NextDate"></field>
							<field name="LastDate"></field>
						</using>
						<field name="LocationID"></field>
						<field name="PayrollWorkLocationID" config-allow-edit.bind="true"></field>
						<field name="TermsID"></field>
						<field name="AllocationID" config-allow-edit.bind="true"></field>
						<field name="AutoAllocate"></field>
						<field name="BillingID" config-allow-edit.bind="true"></field>
						<field name="DefaultBranchID"></field>
						<field name="RateTableID" config-allow-edit.bind="true"></field>
						<field name="CreateProforma"></field>
						<field name="LimitsEnabled"></field>
						<field name="PrepaymentEnabled"></field>
						<field name="PrepaymentDefCode"></field>
						<field name="AutomaticReleaseAR"></field>
					</qp-fieldset>
				</div>
				<div slot="B">
					<qp-fieldset id="SummaryTabSlotB04" view.bind="ProjectProperties" caption="Retainage">
						<field name="RetainageMode"></field>
						<field name="IncludeCO"></field>
						<field name="ProjectRevenueTotals.CuryAmount"></field>
						<field name="ProjectRevenueTotals.CuryRevisedAmount"></field>
						<field name="ProjectRevenueTotals.ContractCompletedPct"></field>
						<field name="ProjectRevenueTotals.ContractCompletedWithCOPct"></field>
						<field name="ProjectRevenueTotals.CuryTotalRetainedAmount"></field>
						<field name="SteppedRetainageOption"
							   control-type="qp-radio"
							   class="no-label"
							   config-class.bind="'vertical'"></field>
						<field name="RetainagePct"></field>
						<field name="RetainageMaxPct">
							<qp-label class="col-auto" caption.bind="ProjectProperties.CuryCapAmount.text"></qp-label>
							<qp-field class="col-auto" control-state.bind="ProjectProperties.CuryCapAmount"></qp-field>
						</field>
						<field name="RetainageStepsGridField" replace-content unbound>
							<qp-grid id="gridRetainageSteps" view.bind="RetainageSteps" class="col-12"></qp-grid>
						</field>
					</qp-fieldset>
					<qp-fieldset id="SummaryTabSlotB02" view.bind="ProjectProperties" caption="AIA">
						<field name="AIALevel"></field>
						<field name="LastProformaNumber"></field>
						<field name="IncludeQtyInAIA"></field>
					</qp-fieldset>
					<qp-fieldset id="Tax_Settings"
								 view.bind="ProjectProperties"
								 caption="Tax Settings"
								 wg-container="ProjectProperties_Tax_Settings">
						<field name="CostTaxZoneID"></field>
						<field name="RevenueTaxZoneID"></field>
					</qp-fieldset>
					<qp-fieldset id="SummaryTabSlotB03" view.bind="ProjectProperties" caption="Visibility Settings">
						<field name="ProjectVisibilitySettingsRow01" unbound>
							<qp-field control-state.bind="ProjectProperties.VisibleInGL" class="col-2"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInAP" class="col-2"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInAR" class="col-2"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInSO" class="col-2"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInPO" class="col-2"></qp-field>
						</field>
						<field name="ProjectVisibilitySettingsRow02" unbound>
							<qp-field control-state.bind="ProjectProperties.VisibleInIN" class="col-2"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInCA" class="col-2"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInCR" class="col-4"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInPROD" class="col-4"></qp-field>
						</field>
						<field name="ProjectVisibilitySettingsRow03" unbound>
							<qp-field control-state.bind="ProjectProperties.VisibleInTA" class="col-4"></qp-field>
							<qp-field control-state.bind="ProjectProperties.VisibleInEA" class="col-4"></qp-field>
						</field>
					</qp-fieldset>
				</div>
			</qp-template>
		</qp-tab>
		<qp-tab id="TasksTab" caption="Tasks">
			<qp-grid id="TaskGrid" view.bind="Tasks"></qp-grid>
		</qp-tab>
		<qp-tab id="RevenueBudgetTab" caption="Revenue Budget">
			<qp-template id="RevenueFilterForm" name="7-10-7" wg-container="RevenueFilter_RevenueFilter">
				<qp-fieldset id="RevenueFilterSlotA" slot="A" view.bind="RevenueFilter" class="transparent-section">
					<field name="GroupByTask" class="no-label"></field>
				</qp-fieldset>
			</qp-template>
			<qp-grid id="RevenueBudgetGrid"
					 view.bind="RevenueBudget"
					 wg-container="RevenueBudget_RevenueBudgetGrid"></qp-grid>
		</qp-tab>
		<qp-tab id="CostBudgetTab" caption="Cost Budget">
			<qp-template id="CostFilterForm" name="7-10-7" wg-container="CostFilter_CostFilter">
				<qp-fieldset id="CostFilterSlotA" slot="A" view.bind="CostFilter" class="transparent-section">
					<field name="GroupByTask" class="no-label"></field>
				</qp-fieldset>
			</qp-template>
			<qp-grid id="CostBudgetGrid" view.bind="CostBudget" wg-container="CostBudget_CostBudgetGrid"></qp-grid>
		</qp-tab>
		<qp-tab id="BalancesTab" caption="Balances">
			<qp-grid id="ProjectBalanceGrid" view.bind="BalanceRecords"></qp-grid>
		</qp-tab>
		<qp-tab id="CommitmentsTab" caption="Commitments">
			<qp-grid id="PurchaseOrdersGrid"
					 view.bind="PurchaseOrders"
					 wg-container="PurchaseOrders_PurchaseOrdersGrid"></qp-grid>
		</qp-tab>
		<qp-tab id="InvoicesTab" caption="Invoices">
			<qp-grid id="InvoicesGrid" view.bind="Invoices" wg-container="Invoices_InvoicesGrid"></qp-grid>
		</qp-tab>
		<qp-tab id="ChangeOrdersTab" caption="Change Orders" if.bind="ProjectProperties.ChangeOrderWorkflow.value == true">
			<qp-grid id="ChangeOrdersGrid" view.bind="ChangeOrders" wg-container="ChangeOrders_ChangeOrdersGrid"></qp-grid>
		</qp-tab>
		<qp-tab id="ChangeRequestsTab"
				caption="Change Requests"
				if.bind="ProjectProperties.ChangeOrderWorkflow.value == true">
			<qp-grid id="gridChangeRequests" view.bind="ChangeRequests"></qp-grid>
		</qp-tab>
		<qp-tab id="UnionLocalsTab" caption="Union Locals">
			<qp-grid id="UnionsGrid" view.bind="Unions" wg-container="Unions_UnionsGrid"></qp-grid>
		</qp-tab>
		<qp-tab id="ActivitiesTab" caption="Activities" ref="tabActivities_Content" load-on-demand="true" class="fit-to-content"></qp-tab>
		<qp-tab id="EmployeesTab" caption="Employees">
			<qp-template id="EmployeesForm" name="1-1" class="stretch">
				<qp-grid id="gridEmployeeContract"
						 slot="A"
						 view.bind="EmployeeContract"
						 caption="Employees"
						 class="framed-section"></qp-grid>
				<qp-grid id="gridContractRates"
						 slot="B"
						 view.bind="ContractRates"
						 caption="Overrides"
						 class="framed-section"></qp-grid>
			</qp-template>
		</qp-tab>
		<qp-tab id="EquipmentTab" caption="Equipment">
			<qp-grid id="ProjectRatesGrid" view.bind="EquipmentRates"></qp-grid>
		</qp-tab>
		<qp-tab id="AddressesTab" caption="Addresses">
			<qp-template id="AddressForm" name="17-17-14">
				<div slot="A">
					<qp-include url="src/screens/common/form-address/form-address.html"
								fs-id="SiteAddressForm"
								fs-wg-container="Site_Address_SiteAddressForm"
								address-view="Site_Address"
								fs-caption="Project Address"
								with-coordinates="true"
								override-fieldname>
						<field remove="#SiteAddressForm [name='AddressLine2']"></field>
					</qp-include>
				</div>
				<div slot="B">
					<qp-include url="src/screens/common/form-contact-document/form-contact-document.html"
								fs-id="Billing_Contact"
								contact-view="Billing_Contact"
								fs-wg-container="Billing_Contact_Billing_Contact"
								fs-caption="Bill-To Contact">
					</qp-include>
					<qp-include url="src/screens/common/form-address/form-address.html"
								fs-id="Billing_Address"
								address-view="Billing_Address"
								fs-caption="Bill-To Address"
								fs-wg-container="Billing_Address_Billing_Address"></qp-include>
				</div>
			</qp-template>
		</qp-tab>
		<qp-tab id="DefaultsTab" caption="Defaults" class="label-size-m">
			<qp-template id="DefaultsForm" name="1-1">
				<div slot="A">
					<qp-fieldset id="DefaultsForm01" view.bind="ProjectProperties" caption="GL Accounts">
						<field name="DefaultSalesAccountID"></field>
						<field name="DefaultSalesSubID"></field>
						<field name="DefaultExpenseAccountID"></field>
						<field name="DefaultExpenseSubID"></field>
						<field name="DefaultAccrualAccountID"></field>
						<field name="DefaultAccrualSubID"></field>
						<field name="DefaultOverbillingAccountID"></field>
						<field name="DefaultOverbillingSubID"></field>
						<field name="DefaultUnderbillingAccountID"></field>
						<field name="DefaultUnderbillingSubID"></field>
					</qp-fieldset>
					<qp-fieldset id="DefaultsForm02" view.bind="ProjectProperties" caption="Drop-Ship Purchases">
						<field name="DropshipExpenseAccountSource"></field>
						<field name="DropshipExpenseSubMask"></field>
						<field name="DropshipReceiptProcessing"></field>
						<field name="DropshipExpenseRecording"></field>
					</qp-fieldset>
					<qp-fieldset id="DefaultsForm03" view.bind="ProjectProperties" caption="GL Accounts for Payroll">
						<field name="EarningsAcctID"></field>
						<field name="EarningsSubID"></field>
						<field name="BenefitExpenseAcctID"></field>
						<field name="BenefitExpenseSubID"></field>
						<field name="TaxExpenseAcctID"></field>
						<field name="TaxExpenseSubID"></field>
						<field name="PTOExpenseAcctID"></field>
						<field name="PTOExpenseSubID"></field>
					</qp-fieldset>
				</div>
				<div slot="B">
					<qp-grid id="AccountTaskGrid"
							 view.bind="Accounts"
							 caption="Default Task for GL Account"
							 class="framed-section"></qp-grid>
					<qp-grid id="gridMarkups" view.bind="Markups" caption="Document Markups" class="framed-section"></qp-grid>
				</div>
			</qp-template>
		</qp-tab>
		<qp-tab id="AttributesTab" caption="Attributes">
			<qp-grid id="PXGridAnswers" view.bind="Answers"></qp-grid>
		</qp-tab>
		<qp-tab id="tabApprovals" caption="Approvals" ref="tabApprovals_Content"></qp-tab>
		<qp-tab id="tabMailingPrinting" caption="Mailing & Printing" ref="tabMailingPrinting_Content"></qp-tab>
		<qp-tab id="LienWaiverSettingsTab"
				caption="Lien Waiver Settings"
				if.bind="ProjectProperties.ThroughDateSourceConditional.enabled || ProjectProperties.ThroughDateSourceUnconditional.enabled">
			<qp-template id="LienWaiverForm" name="1-1">
				<div slot="A">
					<qp-fieldset id="LienWaiverForm01" view.bind="ProjectProperties" caption="Conditional Lien Waivers">
						<field name="ThroughDateSourceConditional"></field>
						<field name="IsActive"></field>
					</qp-fieldset>
					<qp-fieldset id="LienWaiverForm02" view.bind="ProjectProperties" caption="Unconditional Lien Waivers">
						<field name="ThroughDateSourceUnconditional"></field>
					</qp-fieldset>
				</div>
				<div slot="B">
					<qp-grid id="ComplianceSettingsGrid"
						view.bind="LienWaiverRecipients"
						caption="Vendor Classes"
						class="framed-section"></qp-grid>
				</div>
			</qp-template>
		</qp-tab>
		<qp-tab id="ContactsTab" caption="Contacts">
			<qp-grid id="ProjectContactsGrid"
					 view.bind="ProjectContacts"
					 wg-container="ProjectContacts_ProjectContactsGrid"></qp-grid>
		</qp-tab>
		<qp-tab id="ProductionOrdersTab" caption="Production Orders">
			<qp-grid id="ProdOrdersGrid" view.bind="ProjectProdOrders"></qp-grid>
		</qp-tab>
		<qp-tab id="EstimatesTab" caption="Estimates">
			<qp-grid id="EstimatesGrid" view.bind="ProjectEstimates"></qp-grid>
		</qp-tab>
	</qp-tabbar>
	<qp-panel id="CreateProductionOrderFilter" caption="Create Production Order" auto-repaint="true">
		<qp-template id="CreateProductionOrderFilter_FormCreateProdOrder" name="7-10-7" class="equal-height" wg-container>
			<qp-fieldset id="FormCreateProdOrder01" slot="A" view.bind="CreateProductionOrderFilter">
				<field name="OrderType"></field>
				<field name="ProdOrdID"></field>
				<field name="InventoryID"></field>
				<field name="SubItemID"></field>
				<field name="SiteID"></field>
				<field name="LocationID"></field>
			</qp-fieldset>
			<qp-fieldset id="FormCreateProdOrder02" slot="B" view.bind="CreateProductionOrderFilter">
				<field name="ProdDate"></field>
				<field name="QtytoProd"></field>
				<field name="ProjectID"></field>
				<field name="TaskID"></field>
				<field name="CostCodeID"></field>
				<field name="CreateLinkedOrders"></field>
			</qp-fieldset>
		</qp-template>
		<footer>
			<qp-button id="btnCreate" dialog-result="OK" caption="Create"></qp-button>
			<qp-button id="btnProdCancel" dialog-result="Cancel"></qp-button>
		</footer>
	</qp-panel>
	<qp-panel id="ReversingChangeOrders"
			  caption="Reversing Change Orders"
			  auto-repaint="true"
			  width="lg"
			  height="85vh">
		<qp-grid id="ReversingChangeOrdersGrid" view.bind="ReversingChangeOrders" wg-container="ReversingChangeOrders_ReversingChangeOrdersGrid"></qp-grid>
	</qp-panel>
	<qp-panel id="TemplateSettings" caption="New Project Template" auto-repaint="true">
		<qp-fieldset id="formTemplateSettings" view.bind="TemplateSettings">
			<field name="TemplateID"></field>
		</qp-fieldset>
		<footer>
			<qp-button id="PXButtonOK" dialog-result="OK"></qp-button>
			<qp-button id="PXButtonCancel" dialog-result="Cancel"></qp-button>
		</footer>
	</qp-panel>
	<qp-panel id="TasksForAddition" caption="Add Tasks" auto-repaint="true" width="lg" height="85vh">
		<qp-grid id="gridAddTasks" view.bind="TasksForAddition"></qp-grid>
		<footer>
			<qp-button id="PXButton2" dialog-result="OK" state.bind="AddTasks"></qp-button>
			<qp-button id="PXButton3" dialog-result="Cancel"></qp-button>
		</footer>
	</qp-panel>
	<qp-panel id="CopyDialog" caption="Copy Project" auto-repaint="true">
		<qp-fieldset id="formCopyProject" view.bind="CopyDialog">
			<field name="ProjectID"></field>
		</qp-fieldset>
		<footer>
			<qp-button id="PXButtonOK2" dialog-result="OK"></qp-button>
			<qp-button id="PXButtonCancel2" dialog-result="Cancel"></qp-button>
		</footer>
	</qp-panel>
	<qp-panel id="LoadFromTemplateDialog" caption="Warning" auto-repaint="true">
		<qp-label caption="Creation of the project based on the selected template may take a significant amount of time. Do you want to proceed?"></qp-label>
		<footer>
			<qp-button id="PXButton5" dialog-result="OK" state.bind="LoadFromTemplate" caption="Proceed"></qp-button>
			<qp-button id="PXButton4" dialog-result="Cancel"></qp-button>
		</footer>
	</qp-panel>
	<qp-panel id="DocumentSettings" caption="Create Service Order/Appointment" auto-repaint="true">
		<qp-template id="DocumentSettings_formServiceOrderAppointmentSettings"
					 name="7-10-7"
					 class="equal-height"
					 wg-container>
			<qp-fieldset id="formServiceOrderAppointmentSettings" slot="A" view.bind="DocumentSettings">
				<field name="SrvOrdType"></field>
				<field name="BranchID"></field>
				<field name="BranchLocationID"></field>
				<field name="Description"></field>
				<field name="ProjectID"></field>
				<field name="ProjectTaskID"></field>
				<field name="OrderDate"></field>
				<field name="SLAETA_Date">
					<qp-field control-state.bind="DocumentSettings.SLAETA_Time" config-time-mode.bind="true"></qp-field>
				</field>
				<field name="AssignedEmpID"></field>
				<field name="ProblemID"></field>
				<field name="ContactID" config-allow-edit.bind="true"></field>
				<field name="ScheduledDateTimeBegin_Date">
					<qp-field control-state.bind="DocumentSettings.ScheduledDateTimeBegin_Time" config-time-mode.bind="true"></qp-field>
				</field>
				<field name="ScheduledDateTimeEnd_Date">
					<qp-field control-state.bind="DocumentSettings.ScheduledDateTimeEnd_Time" config-time-mode.bind="true"></qp-field>
				</field>
				<field name="HandleManuallyScheduleTime"></field>
			</qp-fieldset>
		</qp-template>
		<footer>
			<qp-button id="CreateAndReview" dialog-result="Yes" caption="Create and Review" config.bind="{validateInput: true}"></qp-button>
			<qp-button id="Create" dialog-result="OK" caption="Create" config.bind="{validateInput: true}"></qp-button>
			<qp-button id="Cancel" dialog-result="Cancel"></qp-button>
		</footer>
	</qp-panel>
</template>
